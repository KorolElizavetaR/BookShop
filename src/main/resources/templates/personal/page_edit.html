<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
    xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Личный кабинет</title>
    <link th:href="@{/css/styles.css}" rel="stylesheet" />
    <link th:href="@{/css/navbar.css}" rel="stylesheet" />
    <link th:href="@{/css/personal.css}" rel="stylesheet" />
</head>

<body>
    <header>
        <script type="text/javascript" th:src="@{/js/navbar.js}"></script>
    </header>
    <main class="paddings">
        <div class="edit-page">
            <!-- Block 1: Edit Personal Information -->
            <div class="edit-section">
                <h2 class="edit-section__title">Изменить личную информацию</h2>
                <form th:action="@{/personal/edit/change-info}" th:method="PATCH" th:object="${personInfo}">
                    <div class="edit-field">
                        <label for="firstName">Имя:</label>
                        <input type="text" th:field="*{firstName}" id="firstName" name="firstName" />
                        <p class="error-message" th:if="${#fields.hasErrors('firstName')}" th:errors="*{firstName}"></p>
                    </div>
                    <div class="edit-field">
                        <label for="lastName">Фамилия:</label>
                        <input type="text" th:field="*{lastName}" id="lastName" name="lastName" />
                        <p class="error-message" th:if="${#fields.hasErrors('lastName')}" th:errors="*{lastName}"></p>
                    </div>
                    <div class="edit-field">
                        <label for="phone">Телефон:</label>
                        <input type="text" th:field="*{phone}" id="phone" name="phone" />
                        <p class="error-message" th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}"></p>
                    </div>
                    <div class="edit-action">
                        <input type="submit" value="Сохранить изменения" class="edit-button" />
                    </div>
                </form>
            </div>

            <div class="edit-section">
                <h2 class="edit-section__title">Изменить пароль</h2>
                <form th:action="@{/personal/edit/change-password}" th:method="PATCH" th:object="${passwords}">
                    <p class="error-message" th:if="${#fields.hasGlobalErrors()}" th:errors="*{global}"></p>
                    <div class="edit-field">
                        <label for="newPassword">Новый пароль:</label>
                        <input type="password" th:field="*{password}" id="password" name="newPassword" />
                        <p class="error-message" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></p>
                    </div>
                    <div class="edit-field">
                        <label for="confirmPassword">Подтвердите новый пароль:</label>
                        <input type="password" th:field="*{confirmPassword}" id="confirmPassword"
                            name="confirmPassword" />
                        <p class="error-message" th:if="${#fields.hasErrors('confirmPassword')}"
                            th:errors="*{confirmPassword}"></p>
                    </div>
                    <div class="edit-action">
                        <input type="submit" value="Сохранить изменения" class="edit-button" />
                    </div>
                </form>
            </div>
        </div>
    </main>
</body>

</html>